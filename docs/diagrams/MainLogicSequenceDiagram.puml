@startuml AddSequenceDiagram
'https://plantuml.com/sequence-diagram

!include style.puml

box MediVault COLOR_MEDIVAULT_BOX
    participant ":MediVault" as medivault COLOR_MEDIVAULT
end box

box Utilities COLOR_UTILITIES_BOX
    participant ":Storage" as storage COLOR_UTILITIES
    participant ":Ui" as ui COLOR_UTILITIES
    participant ":CommandParser" as commandparser COLOR_UTILITIES
end box

box Command COLOR_COMMAND_BOX
    participant ":Command" as command COLOR_COMMAND
end box

autoactivate on

-> medivault: create
    medivault -> storage : getInstance()
    medivault <-- storage
    medivault -> storage : loadData()
    medivault <-- storage

    medivault -> medivault : run
    medivault -> ui : getInstance()
    medivault <-- ui
        loop until exit is received
            medivault -> ui : getInput()
            medivault <-- ui : userInput
            medivault -> commandparser : parseCommand(userInput : String)
            medivault <-- commandparser : userCommand, parameters
            medivault -> commandparser : processCommand()
            commandparser -> commandparser : parseParameters(parametersString)
            commandparser --> commandparser : parameterValues
            create command
            commandparser -> command : Command()
            commandparser <-- command
            medivault <-- commandparser
            medivault -> command : execute()
            deactivate command
        end
note right of command
Note that Command throws
InvalidCommand to MediVault
when an invalid command is
entered.
end note

@enduml